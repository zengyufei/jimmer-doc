"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[3250],{31185:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>N,frontMatter:()=>s,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"object/draft","title":"Draft","description":"\u4e4b\u524d\u7684\u6587\u6863\u6211\u4eec\u53d1\u73b0","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/object/draft.mdx","sourceDirName":"object","slug":"/object/draft","permalink":"/jimmer-doc/zh/docs/object/draft","draft":false,"unlisted":false,"editUrl":"https://github.com/babyfish-ct/jimmer-doc/edit/main/i18n/zh/docusaurus-plugin-content-docs/current/object/draft.mdx","tags":[],"version":"current","lastUpdatedAt":1729456376000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Draft"},"sidebar":"tutorialSidebar","previous":{"title":"\u65b9\u6848","permalink":"/jimmer-doc/zh/docs/object/immutable/solution"},"next":{"title":"\u548cJackson\u534f\u540c","permalink":"/jimmer-doc/zh/docs/object/jackson"}}');var l=r(74848),d=r(28453),t=r(11470),o=r(19365);const s={sidebar_position:3,title:"Draft"},i=void 0,c={},h=[{value:"\u4f7f\u7528\u9884\u7f16\u8bd1\u5668",id:"\u4f7f\u7528\u9884\u7f16\u8bd1\u5668",level:2},{value:"\u5b9a\u4e49TreeNode",id:"\u5b9a\u4e49treenode",level:3},{value:"\u751f\u6210TreeNodeDraft",id:"\u751f\u6210treenodedraft",level:3},{value:"\u6807\u91cf\u5c5e\u6027",id:"\u6807\u91cf\u5c5e\u6027",level:2},{value:"\u5f15\u7528\u5173\u8054",id:"\u5f15\u7528\u5173\u8054",level:2},{value:"\u8986\u76d6getter <code>parent()</code>",id:"\u8986\u76d6getter-parent",level:3},{value:"\u65b0\u589egetter <code>parent(boolean)</code>",id:"\u65b0\u589egetter-parentboolean",level:3},{value:"\u65b0\u589e<code>setParent</code>",id:"\u65b0\u589esetparent",level:3},{value:"\u65b0\u589e\u57fa\u4e8elambda\u7684<code>applyParent</code>",id:"\u65b0\u589e\u57fa\u4e8elambda\u7684applyparent",level:3},{value:"\u96c6\u5408\u5173\u8054",id:"\u96c6\u5408\u5173\u8054",level:2},{value:"\u7ee7\u627fgetter <code>childNodes()</code>",id:"\u7ee7\u627fgetter-childnodes",level:3},{value:"\u65b0\u589egetter <code>childNodes(boolean)</code>",id:"\u65b0\u589egetter-childnodesboolean",level:3},{value:"\u65b0\u589e<code>setChildNodes</code>",id:"\u65b0\u589esetchildnodes",level:3},{value:"\u65b0\u589e<code>addIntoChildNodes</code>",id:"\u65b0\u589eaddintochildnodes",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"\u4e4b\u524d\u7684\u6587\u6863\u6211\u4eec\u53d1\u73b0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u7528\u6237\u5b9a\u4e49\u4e86",(0,l.jsx)(n.code,{children:"Book"}),"\u7c7b\u578b\uff0c\u4f8b\u5b50\u4ee3\u7801\u5c31\u53ef\u4ee5\u4f7f\u7528",(0,l.jsx)(n.code,{children:"BookDraft"}),"\u7c7b\u578b"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u7528\u6237\u5b9a\u4e49\u4e86",(0,l.jsx)(n.code,{children:"TreeNode"}),"\u7c7b\u578b\uff0c\u4f8b\u5b50\u4ee3\u7801\u5c31\u53ef\u4ee5\u4f7f\u7528",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u7c7b\u578b"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u8fd9\u4e9b\u540d\u79f0\u4ee5",(0,l.jsx)(n.code,{children:"Draft"}),"\u7ed3\u5c3e\u4e14\u548c\u7528\u6237\u5b9a\u4e49\u7684\u7c7b\u578b\u4e00\u4e00\u5bf9\u5e94\u7684\u7c7b\u578b\uff0c\u53ebDraft\u7c7b\u578b"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4f7f\u7528\u9884\u7f16\u8bd1\u5668",children:"\u4f7f\u7528\u9884\u7f16\u8bd1\u5668"}),"\n",(0,l.jsx)(n.h3,{id:"\u5b9a\u4e49treenode",children:"\u5b9a\u4e49TreeNode"}),"\n",(0,l.jsxs)(n.p,{children:["\u7528\u6237\u5b9a\u5148\u4e49\u4e0d\u53ef\u53d8\u6570\u636e\u63a5\u53e3\uff0c\u8fd9\u91cc\u65e0\u9700\u4f7f\u7528ORM\u5b9e\u4f53\u6ce8\u89e3",(0,l.jsx)(n.code,{children:"@Entity"}),"\uff0c\u4f7f\u7528\u975eORM\u7684\u6ce8\u89e3",(0,l.jsx)(n.code,{children:"@Immutable"}),"\u5373\u53ef\u8fbe\u5230\u6f14\u793a\u76ee\u7684\u3002"]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNode.java"',children:"package yourpackage;\n\nimport javax.validation.constraints.Null;\nimport java.util.List;\n\nimport org.babyfish.jimmer.Immutable;\n\n@Immutable\npublic interface TreeNode {\n    \n    String name();\n\n    @Null\n    TreeNode parent();\n\n    List<TreeNode> childNodes();\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNode.kt"',children:"package yourpackage\n\nimport org.babyfish.jimmer.Immutable\n\n@Immutable\ninterface TreeNode {\n\n    val name: String\n\n    val parent: TreeNode?\n\n    val childNodes: List<TreeNode>\n}\n"})})})]}),"\n",(0,l.jsx)(n.h3,{id:"\u751f\u6210treenodedraft",children:"\u751f\u6210TreeNodeDraft"}),"\n",(0,l.jsxs)(n.p,{children:["\u8981\u81ea\u52a8\u751f\u6210",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u9700\u8981\u542f\u7528\u9884\u7f16\u8bd1\u5668"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Java: \u4f7f\u7528AnnotationProcessor ",(0,l.jsx)(n.code,{children:"jimmer-apt"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Kotlin: \u4f7f\u7528KSP ",(0,l.jsx)(n.code,{children:"jimmer-ksp"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["\u5982\u4f55\u4f7f\u7528",(0,l.jsx)(n.code,{children:"jimmer-apt/jimmer-ksp"}),"\u3001\u4ee5\u53ca\u9047\u5230\u53ef\u80fd\u7684\u95ee\u9898\u540e\u8be5\u5982\u4f55\u5904\u7406\uff0c\n\u5728",(0,l.jsx)(n.a,{href:"../quick-view/get-started/generate-code",children:"\u751f\u6210\u4ee3\u7801"}),"\u4e2d\u6709\u975e\u5e38\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u672c\u6587\u4e0d\u518d\u8d58\u8ff0\u3002"]})}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"package org.babyfish.jimmer.example.core.model;\n\nimport java.util.List;\nimport org.babyfish.jimmer.DraftConsumer;\nimport org.babyfish.jimmer.lang.OldChain;\n\npublic interface TreeNodeDraft extends TreeNode, Draft {\n\n    // highlight-next-line\n    TreeNodeDraft.Producer $ = Producer.INSTANCE;\n\n\n    @OldChain\n    TreeNodeDraft setName(String name);\n\n\n    TreeNodeDraft parent();\n\n    TreeNodeDraft parent(boolean autoCreate);\n\n\n    @OldChain\n    TreeNodeDraft setParent(TreeNode parent);\n\n    @OldChain\n    TreeNodeDraft applyParent(DraftConsumer<TreeNodeDraft> block);\n\n    @OldChain\n    TreeNodeDraft applyParent(TreeNode base, DraftConsumer<TreeNodeDraft> block);\n\n\n\n    List<TreeNodeDraft> childNodes(boolean autoCreate);\n\n    @OldChain\n    TreeNodeDraft setChildNodes(List<TreeNode> childNodes);\n\n    @OldChain\n    TreeNodeDraft addIntoChildNodes(DraftConsumer<TreeNodeDraft> block);\n\n    @OldChain\n    TreeNodeDraft addIntoChildNodes(TreeNode base, DraftConsumer<TreeNodeDraft> block);\n\n\n\n    class Producer {\n\n        private Producer() {}\n\n        // highlight-next-line\n        public TreeNode produce(\n            DraftConsumer<TreeNodeDraft> block\n        ) {\n            return produce(null, block);\n        }\n\n        // highlight-next-line\n        public TreeNode produce(\n            TreeNode base, \n            DraftConsumer<TreeNodeDraft> block\n        ) {\n            ...omit...\n        }\n\n        ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n    }\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode {\n    public override var name: String\n\n    public override var parent: TreeNode?\n\n    public override var childNodes: List<TreeNode>\n\n    public fun parent(): TreeNodeDraft\n\n    public fun childNodes(): MutableList<TreeNodeDraft>\n\n    public object `$` {\n        \n        ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n\n        public fun produce(\n            base: TreeNode? = null, \n            block: TreeNodeDraft.() -> Unit\n        ): TreeNode {\n            ...omit code...\n        }\n    }\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n\n// highlight-next-line\npublic fun ImmutableCreator<TreeNode>.`by`(\n    base: TreeNode? = null, \n    block: TreeNodeDraft.() -> Unit\n): TreeNode = \n    TreeNodeDraft.`$`.produce(base, block)\n\npublic fun MutableList<TreeNodeDraft>.addBy(\n    base: TreeNode? = null,\n    block: TreeNodeDraft.() -> Unit\n): MutableList<TreeNodeDraft> {\n    add(TreeNodeDraft.`$`.produce(base, block) as TreeNodeDraft)\n    return this\n}\n\n// highlight-next-line\npublic fun TreeNode.copy(block: TreeNodeDraft.() -> Unit): TreeNode =\n    TreeNodeDraft.`$`.produce(this, block)\n"})})})]}),"\n",(0,l.jsx)(n.p,{children:"\u4f60\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4ece\u5934\u521b\u5efa\u5168\u65b0\u7684\u5bf9\u8c61"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"TreeNode oldTreeNode = Immutables.createTreeNode(treeNodeDraft -> {\n        ...\u7701\u7565...\n    });\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"vak oldTreeNode = TreeNode {\n    ...\u7701\u7565...\n}\n"})})})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u6839\u636e\u5df2\u6709\u7684\u5bf9\u8c61\uff0c\u8fdb\u884c\u67d0\u4e9b\u201c\u53d8\u66f4\u201d\u540e\uff0c\u521b\u5efa\u65b0\u7684\u5bf9\u8c61"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"TreeNode newTreeNode = Immutables.createTreeNode(oldTreeNode, treeNodeDraft -> {\n        ...\u7701\u7565...\n    });\n"})})}),(0,l.jsxs)(o.A,{value:"kotlin",label:"Kotlin",children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val newTreeNode = TreeNode(oldTreeNode) {\n    ...\u7701\u7565...\n}\n"})}),(0,l.jsx)(n.p,{children:"\u6216"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val newTreeNode = oldTreeNode.copy {\n    ...\u7701\u7565...\n}\n"})})]})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6807\u91cf\u5c5e\u6027",children:"\u6807\u91cf\u5c5e\u6027"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"TreeNode.name"}),"\u662f\u4e00\u4e2a\u6807\u91cf\u5c5e\u6027\u3002",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u4f1a\u5b9a\u4e49\u5982\u4e0b\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"setter\u65b9\u6cd5/\u53ef\u5199\u5c5e\u6027"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    @OldChain\n    TreeNodeDraft setName(String name);\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode {\n    \n    // var, not val\n    public override var name: String\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})})]}),"\n",(0,l.jsxs)(n.p,{children:["\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u901a\u8fc7\u6b64\u65b9\u6cd5\u8bbe\u7f6edraft\u4ee3\u7406\u7684",(0,l.jsx)(n.code,{children:"name"}),"\u5c5e\u6027"]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode treeNode = Immutables.createTreeNode(draft -> {\n        draft.setName("Root Node");\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val treeNode = TreeNode {\n    name = "Root Node"\n} \n'})})})]}),"\n",(0,l.jsx)(n.h2,{id:"\u5f15\u7528\u5173\u8054",children:"\u5f15\u7528\u5173\u8054"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"TreeNode.parent"}),"\u662f\u4e00\u4e2a\u5173\u8054\u5c5e\u6027\u3002\u5176\u7c7b\u578b\u662f\u5bf9\u8c61\uff0c\u800c\u975e\u96c6\u5408\u3002\u5982\u679c\u7528ORM\u7684\u8bdd\u6765\u8bb2\uff0c\u662f\u4e00\u5bf9\u4e00\u6216\u591a\u5bf9\u4e00\u5173\u8054\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u4e3a\u5176\u5b9a\u4e49\u4e86\u591a\u4e2a\u65b9\u6cd5"]}),"\n",(0,l.jsxs)(n.h3,{id:"\u8986\u76d6getter-parent",children:["\u8986\u76d6getter ",(0,l.jsx)(n.code,{children:"parent()"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    TreeNodeDraft parent();\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode {\n    \n    public fun parent(): TreeNodeDraft\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})})]}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsxs)(n.p,{children:["\u6ce8\u610f\uff0c\u6b64\u65b9\u6cd5\u7684\u8fd4\u56de\u7c7b\u578b\u662f",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\uff0c\u800c\u975e",(0,l.jsx)(n.code,{children:"TreeNode"}),"\u3002"]}),(0,l.jsx)(n.p,{children:"\u5373\uff0c\u5982\u679cdraft\u5bf9\u8c61\u7684\u5f15\u7528\u5173\u8054\u88ab\u8bbe\u7f6e\u8fc7\u4e14\u88ab\u8bbe\u7f6e\u4e3a\u975enull\uff0c\u90a3\u4e48\u8be5\u65b9\u6cd5\u4e00\u5b9a\u8fd4\u56dedraft\u5bf9\u8c61\u3002\u8fd9\u6837\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539\u66f4\u6df1\u7684\u5173\u8054\u5bf9\u8c61\u3002"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode newTreeNode = Immutables.createTreeNode(treeNode, draft -> {\n        draft.parent().setName("Daddy");\n        draft.parent().parent().setName("Grandpa");\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'@DslScope\nvar newTreeNode = TreeNode(treeNode) {\n    parent().name = "Daddy"\n    parent().parent().name = "Grandpa"\n}\n'})})})]}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589egetter-parentboolean",children:["\u65b0\u589egetter ",(0,l.jsx)(n.code,{children:"parent(boolean)"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    TreeNode parent(boolean autoCreate);\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode {\n\n    // \u8fd9\u4e2a\u5c5e\u6027\u7684getter\u7b49\u4ef7\u4e8eJava\u7684`parent(false)` \n    override fun parent: TreeNode\n    \n    // \u8fd9\u4e2a\u51fd\u6570\u7b49\u4ef7\u4e8eJava\u7684`parent(true)` \n    public fun parent(): TreeNodeDraft\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})})]}),"\n",(0,l.jsxs)(n.p,{children:["Java\u7684",(0,l.jsx)(n.code,{children:"parent(false)"}),"\u548cKotlin\u7684",(0,l.jsx)(n.code,{children:"parent"}),"\uff0c\u5177\u5907\u4ee5\u4e0b\u4e24\u4e2a\u95ee\u9898\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5982\u679cdraft\u5bf9\u8c61\u7684\u5c5e\u6027",(0,l.jsx)(n.code,{children:"parent"}),"\u672a\u88ab\u8bbe\u7f6e\uff0c\u8bbf\u95ee\u5b83\u4f1a\u5bfc\u81f4\u5f02\u5e38"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5982\u679cdraft\u5bf9\u8c61\u7684\u5c5e\u6027",(0,l.jsx)(n.code,{children:"parent"}),"\u88ab\u8bbe\u7f6e\u4e3anull\uff0c\u8bbf\u95ee\u5b83\u4f1a\u8fd4\u56denull\uff0cnull\u65e0\u6cd5\u652f\u6301\u8fdb\u4e00\u6b65\u4fee\u6539\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"parent(true)"}),"\u53ef\u4ee5\u89e3\u51b3\u4ee5\u4e0a\u7684\u95ee\u9898\uff0c\u5982\u679c\u4e0a\u8ff0\u4efb\u4f55\u4e00\u79cd\u60c5\u51b5\u6ee1\u8db3\uff0c\u5c31\u81ea\u52a8\u521b\u5efa\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u5173\u8054\u5bf9\u8c61\uff0c\u7136\u540e\u5141\u8bb8\u7528\u6237\u4fee\u6539\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5b9e\u7528\u7684\u529f\u80fd\uff0c\u5c24\u5176\u662f\u4ece\u5934\u521b\u5efa\u5bf9\u8c61\u65f6\u3002"]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode treeNode = Immutables.createTreeNode(/* No `base` here */ draft -> {\n        draft.parent(true).setName("Daddy");\n        draft.parent(true).parent(true).setName("Grandpa");\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val treeNode = TreeNode /* No `base` here */ {\n    parent().setName("Daddy");\n    parent().parent().setName("Grandpa");\n}\n'})})})]}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589esetparent",children:["\u65b0\u589e",(0,l.jsx)(n.code,{children:"setParent"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    @OldChain\n    TreeNodeDraft setParent(TreeNode parent);\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode, Draft {\n\n    // var, not val\n    public var parent: TreeNode\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})})]}),"\n",(0,l.jsx)(n.p,{children:"\u8be5setter\u5141\u8bb8\u7528\u6237\u66ff\u6362\u6574\u4e2a\u5173\u8054\u5bf9\u8c61\u3002"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode treeNode = Immutables.createTreeNode(draft -> {\n        draft.setParent(\n            Immutables.createTreeNode(daddyDraft -> {\n                daddyDraft.setName("Daddy")\n            })\n        )\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val treeNode = TreeNode {\n    parent = TreeNode {\n        name = "Daddy"\n    }\n}\n'})})})]}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589e\u57fa\u4e8elambda\u7684applyparent",children:["\u65b0\u589e\u57fa\u4e8elambda\u7684",(0,l.jsx)(n.code,{children:"applyParent"})]}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsx)(n.p,{children:"\u6b64\u529f\u80fd\u4ec5\u9002\u7528\u4e8eJava"}),(0,l.jsx)(n.p,{children:"kotlin\u7684\u4ee3\u7801\u5df2\u7ecf\u8db3\u591f\u7b80\u6d01\u4e86\uff0c\u4e0d\u9700\u8981\u8fd9\u79cd\u65b9\u6cd5\u6765\u7b80\u5316\u4ee3\u7801\u3002"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    @OldChain\n    TreeNodeDraft applyParent(\n        DraftConsumer<TreeNodeDraft> block\n    );\n\n    @OldChain\n    TreeNodeDraft applyParent(\n        TreeNode base, \n        DraftConsumer<TreeNodeDraft> block\n    );\n\n    ...\u7701\u7565\u5176\u5b83\u4ee3\u7801...\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e24\u4e2asetter\u7528\u4e8e\u7b80\u5316\u7684\u4ee3\u7801\u3002\u7531\u4e8e\u4e24\u4e2a\u65b9\u6cd5\u7684\u7528\u6cd5\u9ad8\u5ea6\u76f8\u4f3c\uff0c\u4ec5\u4ee5\u7b2c\u4e00\u4e2a\u4e3e\u4f8b\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u6bd4\u8f83\u5570\u55e6\u7684\u5199\u6cd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode oldTreeNode = Immutables.createTreeNode(draft -> {\n        draft.setParent(\n            Immutables.createTreeNode(daddyDraft -> {\n                daddyDraft.setName("Daddy")\n            })\n        )\n    });\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u6bd4\u8f83\u7b80\u6d01\u7684\u5199\u6cd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode oldTreeNode = Immutables.createTreeNode(draft -> {\n        draft.applyParent(daddyDraft -> {\n            daddyDraft.setName("Daddy")\n        })\n    });\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e8c\u8005\u5b8c\u5168\u7b49\u4ef7\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u96c6\u5408\u5173\u8054",children:"\u96c6\u5408\u5173\u8054"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"TreeNode.childNodes"}),"\u662f\u4e00\u4e2a\u5173\u8054\u5c5e\u6027\u3002\u5176\u7c7b\u578b\u662f\u96c6\u5408\uff0c\u800c\u975e\u5bf9\u8c61\u3002\u5982\u679c\u7528ORM\u7684\u8bdd\u6765\u8bb2\uff0c\u662f\u4e00\u5bf9\u591a\u6216\u591a\u5bf9\u591a\u5173\u8054\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u4e3a\u5176\u5b9a\u4e49\u4e86\u591a\u4e2a\u65b9\u6cd5"]}),"\n",(0,l.jsxs)(n.h3,{id:"\u7ee7\u627fgetter-childnodes",children:["\u7ee7\u627fgetter ",(0,l.jsx)(n.code,{children:"childNodes()"})]}),"\n",(0,l.jsxs)(n.p,{children:["\u65e0\u8bba\u5bf9Java\u8fd8\u662fkotlin\uff0c",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u65e0\u6cd5\u8986\u76d6",(0,l.jsx)(n.code,{children:"childNodes()"}),"\u65b9\u6cd5\u7684\u8fd4\u56de\u7c7b\u578b\uff0c\u4ece\u8bed\u6cd5\u5c42\u9762\u4e0a\u8bb2\uff0c\u53ea\u80fd\u7ee7\u627f",(0,l.jsx)(n.code,{children:"TreeNode"}),"\u7684",(0,l.jsx)(n.code,{children:"childNodes()"}),"\u65b9\u6cd5\u3002"]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"List<TreeNode> childNodes();\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"var childNodes: List<TreeNode>\n"})})})]}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsxs)(n.p,{children:["\u867d\u7136\u8fd9\u4e2a\u7684\u65b9\u6cd5\u5728",(0,l.jsx)(n.code,{children:"TreeNode"}),"\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u8fd4\u56de\u7c7b\u578b\u662f",(0,l.jsx)(n.code,{children:"List<TreeNode>"}),"\uff0c\u4f46\u662f\uff0c\u88ab",(0,l.jsx)(n.code,{children:"TreeNodeDraft"}),"\u63a5\u53e3\u7ee7\u627f\u540e\uff0c\u5e94\u8be5\u5c06\u5176\u8fd4\u56de\u7c7b\u578b\u7406\u89e3\u6210",(0,l.jsx)(n.code,{children:"List<TreeNodeDraft>"}),"\u3002"]})}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"\u5982\u679cdraft\u5bf9\u8c61\u7684\u96c6\u5408\u5173\u8054\u88ab\u8bbe\u7f6e\u8fc7\uff0c\u8fd4\u56de\u7684\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662fdraft\u3002\u8fd9\u6837\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539\u96c6\u5408\u4e2d\u66f4\u6df1\u7684\u5173\u8054\u5bf9\u8c61\u3002"})}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode newTreeNode = Immutables.createTreeNode(treeNode, draft -> {\n        ((TreeNodeDraft)\n            draft\n                .childNodes().get(0)\n        ).setName("Son");\n        ((TreeNodeDraft)\n            draft\n                .childNodes().get(0)\n                .childNodes().get(0)\n        ).setName("Grandson");\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val newTreeNode = TreeNode(treeNode) {\n    (childNodes[0] as TreeNodeDraft)\n        .name = "Son"\n    (childNodes[0].childNodes[0] as TreeNodeDraft)\n        .name = "Son"\n}\n'})})})]}),"\n",(0,l.jsxs)(n.admonition,{type:"danger",children:[(0,l.jsx)(n.p,{children:"\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5bf9\u5f00\u53d1\u4f53\u9a8c\u4ea7\u751f\u4e86\u663e\u8457\u7684\u7834\u574f\uff0c\u6240\u4ee5\uff0c\u4e0d\u63a8\u8350\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u5982\u6b64\u4f7f\u7528\u3002"}),(0,l.jsxs)(n.p,{children:["\u4e3a\u5b9e\u73b0\u76f8\u540c\u76ee\u7684\uff0c\u66f4\u63a8\u8350\u63a5\u4e0b\u6765\u8981\u4ecb\u7ecd\u7684",(0,l.jsx)(n.code,{children:"childNodes(boolean)"}),"\u65b9\u6cd5\u3002"]})]}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589egetter-childnodesboolean",children:["\u65b0\u589egetter ",(0,l.jsx)(n.code,{children:"childNodes(boolean)"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsxs)(o.A,{value:"java",label:"Java",children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    List<TreeNodeDraft> childNodes(boolean autoCreate);\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})}),(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"childNodes(false)"}),"\u548c",(0,l.jsx)(n.code,{children:"childNodes()"}),"\u7b49\u4ef7\uff0c\u5982\u679cdraft\u5bf9\u8c61\u7684\u5c5e\u6027",(0,l.jsx)(n.code,{children:"childNodes"}),"\u672a\u88ab\u8bbe\u7f6e\uff0c\u8bbf\u95ee\u5b83\u4f1a\u5bfc\u81f4\u5f02\u5e38\u3002\n",(0,l.jsx)(n.code,{children:"childNodes(true)"}),"\u4f1a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u96c6\u5408\u5173\u8054\u5c5e\u6027\u8fd8\u672a\u88ab\u8bbe\u7f6e\uff0c\u5219\u81ea\u52a8\u521b\u5efa\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u96c6\u5408\uff0c\u7136\u540e\u5141\u8bb8\u7528\u6237\u4fee\u6539\u8be5\u96c6\u5408\u3002"]})]}),(0,l.jsxs)(o.A,{value:"kotlin",label:"Kotlin",children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode, Draft {\n\n    override var childNodes: List<TreeNode>\n    \n    fun childNodes(): MutableList<TreeNode>\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"childNodes"}),"\u5c5e\u6027\u7684getter\u7b49\u4ef7\u4e8eJava\u7684",(0,l.jsx)(n.code,{children:"childNodes(false)"}),"\u3002\u5982\u679c\u53ef\u53d8\u4ee3\u7406\u7684\u6b64\u5c5e\u6027\u672a\u88ab\u8bbe\u7f6e, \u8bbf\u95ee\u5b83\u4f1a\u5bfc\u81f4\u5f02\u5e38\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"childNodes()"}),"\u51fd\u6570\u7b49\u4ef7\u4e8eJava\u7684",(0,l.jsx)(n.code,{children:"childNodes(true)"}),"\uff0c\u5982\u679c\u5c5e\u6027\u672a\u88ab\u8bbe\u7f6e\u5219\u81ea\u52a8\u521b\u5efa, \u5141\u8bb8\u7528\u6237\u4fee\u6539\u8be5\u96c6\u5408\u3002"]}),"\n"]})]})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsxs)(o.A,{value:"java",label:"Java",children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode newTreeNode = Immutables.createTreeNode(treeNode, draft -> {\n        draft\n            .childNodes(false)\n            .get(0)\n            .setName("Son");\n        draft\n            .childNodes(false)\n            .get(0)\n            .childNodes(false)\n            .get(0)\n            .setName("Grandson");\n    });\n'})}),(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:"\u8bda\u7136\uff0c\u5f53\u53c2\u6570\u4e3a true \u65f6\uff0cchildNodes(boolean) \u80fd\u591f\u5728\u672a\u6307\u5b9a childNodes \u5c5e\u6027\u65f6\u81ea\u52a8\u521b\u5efa\u96c6\u5408\u3002"}),(0,l.jsxs)(n.p,{children:["\u7136\u800c\uff0c\u5f53\u53c2\u6570\u4e3a false \u65f6\uff0c\u540c\u6837\u4e5f\u5f88\u6709\u7528\u3002\u7531\u4e8e\u6b64\u65b9\u6cd5\u7684\u8fd4\u56de\u7c7b\u578b\u662f",(0,l.jsx)(n.code,{children:"List<TreeNodeDraft>"}),"\u800c\u4e0d\u662f",(0,l.jsx)(n.code,{children:"List<TreeNode>"}),"\uff0c\u56e0\u6b64\u4e0a\u4e00\u4e2a\u793a\u4f8b\u4e2d\u5bf9\u5f00\u53d1\u4eba\u5458\u4e0d\u53cb\u597d\u7684\u4ee3\u7801\u5c06\u4e0d\u518d\u5b58\u5728\u3002"]})]})]}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val newTreeNode = TreeNode(treeNode) {\n    childNodes()[0].name = "Son"\n    childNodes()[0].childNodes()[0].name = "Grandson"\n}\n'})})})]}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589esetchildnodes",children:["\u65b0\u589e",(0,l.jsx)(n.code,{children:"setChildNodes"})]}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    @OldChain\n    TreeNodeDraft setChildNodes(List<TreeNode> childNodes);\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.kt"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode, Draft {\n\n    // var, not val\n    overrie var childNodes: List<TreeNode>\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})})]}),"\n",(0,l.jsx)(n.p,{children:"\u8be5setter\u5141\u8bb8\u7528\u6237\u66ff\u6362\u6574\u4e2a\u5173\u8054\u96c6\u5408\u3002"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode treeNode = Immutables.createTreeNode(draft -> {\n        draft.setChildNodes(\n            Arrays.asList(\n                Immutables.createTreeNode(childDraft -> {\n                    childDraft.setName("Eldest son")\n                }),\n                Immutables.createTreeNode(childDraft -> {\n                    childDraft.setName("Second son")\n                })\n            )\n        )\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val treeNode = TreeNode {\n    childNodes = listOf(\n        TreeNode {\n            name = "Eldest son"\n        },\n        TreeNode {\n            name = "Second son"\n        }\n    )\n}\n'})})})]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["\u7565\u663e\u7e41\u7410\uff0c\u66f4\u63a8\u8350\u4e0b\u9762\u5373\u5c06\u4ecb\u7ecd\u7684",(0,l.jsx)(n.code,{children:"addIntoChildNodes"})]})}),"\n",(0,l.jsxs)(n.h3,{id:"\u65b0\u589eaddintochildnodes",children:["\u65b0\u589e",(0,l.jsx)(n.code,{children:"addIntoChildNodes"})]}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528",(0,l.jsx)(n.code,{children:"setChildNodes"}),"\u66ff\u6362\u4e86\u6574\u4e2a\u96c6\u5408\uff0c\u4f46\u662f\u8fd8\u53ef\u4ee5\u9009\u62e9\u4ee5\u9010\u4e2a\u6dfb\u52a0\u96c6\u5408\u5143\u7d20\uff0c\u800c\u975e\u4e00\u6b21\u6027\u66ff\u6362\u6574\u4e2a\u96c6\u5408\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u751f\u6210\u4ee3\u7801\u5982\u4e0b"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",metastring:'title="TreeNodeDraft.java"',children:"public interface TreeNodeDraft extends TreeNode, Draft {\n\n    @OldChain\n    TreeNodeDraft addIntoChildNodes(\n        DraftConsumer<TreeNodeDraft> block\n    );\n\n    @OldChain\n    TreeNodeDraft addIntoChildNodes(\n        TreeNode base, \n        DraftConsumer<TreeNodeDraft> block\n    );\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",metastring:'title="TreeNodeDraft.java"',children:"@DslScope\npublic interface TreeNodeDraft : TreeNode, Draft {\n\n    public fun childNodes(): MutableList<TreeNodeDraft>\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n\n// highlight-next-line\npublic fun MutableList<TreeNodeDraft>.addBy(\n    base: TreeNode? = null,\n    block: TreeNodeDraft.() -> Unit\n): MutableList<TreeNodeDraft> {\n    ...omit...\n    return this;\n}\n"})})})]}),"\n",(0,l.jsx)(n.p,{children:"\u4f60\u5e94\u8be5\u5982\u6b64\u4f7f\u7528\u3002"}),"\n",(0,l.jsxs)(t.A,{groupId:"language",children:[(0,l.jsx)(o.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'TreeNode treeNode = Immutables.createTreeNode(draft -> {\n        draft\n            .addIntoChildNodes(childDraft ->\n                childDraft.setName("Eldest son")\n            )\n            .addIntoChildNodes(childDraft ->\n                childDraft.setName("Second son")\n            )\n    });\n'})})}),(0,l.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val treeNode = TreeNode {\n    childNodes().addBy {\n        name = "Eldest son"\n    }\n    childNodes().addBy {\n        name = "Second son"\n    }\n}\n'})})})]}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsxs)(n.p,{children:["\u8fd9\u79cd\u5199\u6cd5\u9690\u542b\u4e86\u4e00\u4e2a\u529f\u80fd\uff0cdraft\u5bf9\u8c61\u7684\u5c5e\u6027",(0,l.jsx)(n.code,{children:"childNodes"}),"\u672a\u88ab\u8bbe\u7f6e\uff0c\u81ea\u52a8\u521b\u5efa\u96c6\u5408\u3002\u5373\uff0c\u5185\u7f6e\u4e86\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"childNodes(true)"}),"\u3002"]}),(0,l.jsx)(n.p,{children:"\u5f88\u660e\u663e\uff0c\u8fd9\u79cd\u5199\u6cd5\u6bd4\u4f7f\u7528setter\u66ff\u6362\u6574\u4e2a\u96c6\u5408\u66f4\u7b80\u5355\uff0c\u6240\u4ee5\uff0c\u66f4\u63a8\u8350\u8fd9\u79cd\u5199\u6cd5\u3002"})]})]})}function N(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},19365:(e,n,r)=>{r.d(n,{A:()=>t});r(96540);var a=r(18215);const l={tabItem:"tabItem_Ymn6"};var d=r(74848);function t(e){let{children:n,hidden:r,className:t}=e;return(0,d.jsx)("div",{role:"tabpanel",className:(0,a.A)(l.tabItem,t),hidden:r,children:n})}},11470:(e,n,r)=>{r.d(n,{A:()=>T});var a=r(96540),l=r(18215),d=r(23104),t=r(56347),o=r(205),s=r(57485),i=r(31682),c=r(70679);function h(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:r}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:r,attributes:a,default:l}}=e;return{value:n,label:r,attributes:a,default:l}}))}(r);return function(e){const n=(0,i.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function N(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function j(e){let{queryString:n=!1,groupId:r}=e;const l=(0,t.W6)(),d=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,s.aZ)(d),(0,a.useCallback)((e=>{if(!d)return;const n=new URLSearchParams(l.location.search);n.set(d,e),l.replace({...l.location,search:n.toString()})}),[d,l])]}function p(e){const{defaultValue:n,queryString:r=!1,groupId:l}=e,d=u(e),[t,s]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!N({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:d}))),[i,h]=j({queryString:r,groupId:l}),[p,x]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,d]=(0,c.Dv)(r);return[l,(0,a.useCallback)((e=>{r&&d.set(e)}),[r,d])]}({groupId:l}),f=(()=>{const e=i??p;return N({value:e,tabValues:d})?e:null})();(0,o.A)((()=>{f&&s(f)}),[f]);return{selectedValue:t,selectValue:(0,a.useCallback)((e=>{if(!N({value:e,tabValues:d}))throw new Error(`Can't select invalid tab value=${e}`);s(e),h(e),x(e)}),[h,x,d]),tabValues:d}}var x=r(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=r(74848);function g(e){let{className:n,block:r,selectedValue:a,selectValue:t,tabValues:o}=e;const s=[],{blockElementScrollPositionUntilNextRender:i}=(0,d.a_)(),c=e=>{const n=e.currentTarget,r=s.indexOf(n),l=o[r].value;l!==a&&(i(n),t(l))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=s.indexOf(e.currentTarget)+1;n=s[r]??s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;n=s[r]??s[s.length-1];break}}n?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":r},n),children:o.map((e=>{let{value:n,label:r,attributes:d}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>s.push(e),onKeyDown:h,onClick:c,...d,className:(0,l.A)("tabs__item",f.tabItem,d?.className,{"tabs__item--active":a===n}),children:r??n},n)}))})}function b(e){let{lazy:n,children:r,selectedValue:d}=e;const t=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=t.find((e=>e.props.value===d));return e?(0,a.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==d})))})}function v(e){const n=p(e);return(0,m.jsxs)("div",{className:(0,l.A)("tabs-container",f.tabList),children:[(0,m.jsx)(g,{...n,...e}),(0,m.jsx)(b,{...n,...e})]})}function T(e){const n=(0,x.A)();return(0,m.jsx)(v,{...e,children:h(e.children)},String(n))}},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var a=r(96540);const l={},d=a.createContext(l);function t(e){const n=a.useContext(d);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),a.createElement(d.Provider,{value:n},e.children)}}}]);