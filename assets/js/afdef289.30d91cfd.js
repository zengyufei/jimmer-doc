"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[7678],{84604:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"configuration/sql-log","title":"SQL Log","description":"For ORM, it is important to print generated SQL in logs.","source":"@site/docs/configuration/sql-log.mdx","sourceDirName":"configuration","slug":"/configuration/sql-log","permalink":"/jimmer-doc/docs/configuration/sql-log","draft":false,"unlisted":false,"editUrl":"https://github.com/babyfish-ct/jimmer-doc/edit/main/docs/configuration/sql-log.mdx","tags":[],"version":"current","lastUpdatedAt":1711320943000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"SQL Log"},"sidebar":"tutorialSidebar","previous":{"title":"Batch Control","permalink":"/jimmer-doc/docs/configuration/batch-size"},"next":{"title":"Default Enum Strategy","permalink":"/jimmer-doc/docs/configuration/default-enum-strategy"}}');var l=t(74848),i=t(28453),s=t(11470),a=t(19365);const o={sidebar_position:5,title:"SQL Log"},c=void 0,d={},h=[{value:"Enable SQL Log",id:"enable-sql-log",level:2},{value:"Pretty SQL",id:"pretty-sql",level:2},{value:"Inline SQL Parameters",id:"inline-sql-parameters",level:2},{value:"Embed Stack Trace",id:"embed-stack-trace",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"For ORM, it is important to print generated SQL in logs."}),"\n",(0,l.jsx)(n.h2,{id:"enable-sql-log",children:"Enable SQL Log"}),"\n",(0,l.jsx)(n.p,{children:"There are two ways to enable SQL logs:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When using Spring Boot Starter, there are two ways to configure:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Modify ",(0,l.jsx)(n.code,{children:"application.yml"})," ",(0,l.jsx)(n.em,{children:"(or application.properties)"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"jimmer:\n    show-sql: true\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Configure global Bean"}),"\n",(0,l.jsxs)(s.A,{groupId:"language",children:[(0,l.jsx)(a.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"@Bean\npublic Executor executor() {\n    return Executor.log(); \n}\n"})})}),(0,l.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"@Bean\nfun executor(): Executor = \n    Executor.log()\n"})})})]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["If both methods above are used ",(0,l.jsx)(n.em,{children:"(not recommended)"}),", the second method takes precedence."]})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Use underlying API"}),"\n",(0,l.jsxs)(s.A,{groupId:"language",children:[(0,l.jsx)(a.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setExecutor(Executor.log())\n    ...Omit other configurations...\n    .build();\n"})})}),(0,l.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val sqlClient = newKSqlClient {\n    setExecutor(Executor.log())\n    ...Omit other configurations...\n}\n"})})})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The actual printed logs are as follows:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"jimmer> sql: select tb_1_.ID, tb_1_.CREATED_TIME, tb_1_.MODIFIED_TIME, tb_1_.NAME, tb_1_.EDITION, tb_1_.PRICE, tb_1_.STORE_ID from BOOK tb_1_  where lower(tb_1_.NAME) like ?  order by tb_1_.NAME asc, tb_1_.EDITION desc limit ?, ?, variables: [%graphql%, 0, 10], purpose: QUERY\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsx)(n.p,{children:"If only the SQL log is turned on, the above log will not wrap."})}),"\n",(0,l.jsx)(n.p,{children:"The log has three parts:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"sql"}),": The SQL statement being executed"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"variables"}),": The JDBC parameters associated with ",(0,l.jsx)(n.code,{children:"sql"}),', which is an array whose length is the same as the number of "?" characters in ',(0,l.jsx)(n.code,{children:"sql"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"purpose"}),": The reason why the SQL is executed, which is an enum with the following values:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"QUERY"}),": Query directly executed by developers"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"UPDATE"}),": Operations performed by developers via ",(0,l.jsx)(n.a,{href:"../mutation/update-statement",children:"update statements"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"DELETE"}),": Operations performed by developers via ",(0,l.jsx)(n.a,{href:"../mutation/delete-statement",children:"delete statements"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"LOAD"}),": Query executed automatically by Jimmer to get the value of associated properties or calculated properties in ",(0,l.jsx)(n.a,{href:"../query/object-fetcher",children:"object fetcher"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"EXPORT"}),": The user initiates a query to other microservices, and its ",(0,l.jsx)(n.a,{href:"../query/object-fetcher",children:"object fetcher"})," contains remote associations pointing to the current service. Jimmer automatically exposes the data of this service."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"MUTATE"}),": Operations specified by developers via ",(0,l.jsx)(n.a,{href:"../mutation/save-command",children:"save commands"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"EVICT"}),": In some cases, the cache that should be cleared cannot be determined solely based on the event information of Jimmer triggers. Jimmer will automatically execute some queries to accurately determine which caches should be cleared."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"pretty-sql",children:"Pretty SQL"}),"\n",(0,l.jsx)(n.p,{children:"In the previous example, the SQL log is printed in one line, which is poorly readable."}),"\n",(0,l.jsx)(n.p,{children:"Therefore, the SQL needs to be formatted. There are two implementation methods:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When using Spring Boot Starter"}),"\n",(0,l.jsxs)(n.p,{children:["Modify ",(0,l.jsx)(n.code,{children:"application.yml"})," ",(0,l.jsx)(n.em,{children:"(or application.properties)"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"jimmer:\n    show-sql: true\n    # highlight-next-line  \n    pretty-sql: true\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When using underlying API"}),"\n",(0,l.jsxs)(s.A,{groupId:"language",children:[(0,l.jsx)(a.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setExecutor(Executor.log())\n    // highlight-next-line\n    .setSqlFormatter(SqlFormatter.PRETTY)\n    ...Omit other configurations...\n    .build();\n"})})}),(0,l.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val sqlClient = newKSqlClient {\n    setExecutor(Executor.log())\n    // highlight-next-line\n    setSqlFormatter(SqlFormatter.PRETTY)\n    ...Omit other configurations...\n}\n"})})})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The log output is as follows:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Execute SQL===>\nPurpose: QUERY\nSQL: select \n    tb_1_.ID,\n    tb_1_.CREATED_TIME,\n    tb_1_.MODIFIED_TIME,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_\nwhere\n    lower(tb_1_.NAME) like ? /* %graphql% */ \u2776   \norder by\n    tb_1_.NAME asc,\n    tb_1_.EDITION desc\nlimit ? /* 0 */ \u2777, ? /* 10 */ \u2778\nJDBC response status: success\nTime cost: 8ms\n<===Execute SQL\n"})}),"\n",(0,l.jsx)(n.p,{children:"In this mode:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The SQL statement will be automatically formatted, automatically wrapped, and automatically indented."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u2776 \u2777 \u2778 Unlike the previous example, all JDBC parameters are not printed together, but injected into the original SQL as comments."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Other information will be printed, such as whether SQL execution is successful, total execution time of SQL. For insert, update, delete operations, the number of affected rows will also be printed."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"inline-sql-parameters",children:"Inline SQL Parameters"}),"\n",(0,l.jsxs)(n.p,{children:["In the previous examples, the JDBC parameters in the SQL logs were inserted after the JDBC parameter placeholders ",(0,l.jsx)(n.code,{children:"?"})," as comment, e.g. ",(0,l.jsx)(n.code,{children:"? /* %graphql% */"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Perhaps you want the parameters to be inlined into the SQL statement directly, making it look as if no JDBC parameters were used. This way, the SQL statement in the logs can be copied directly into a SQL IDE to execute."}),"\n",(0,l.jsx)(n.p,{children:"There are two ways to achieve this"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Using Spring Boot Starter:"}),"\n",(0,l.jsxs)(n.p,{children:["Modify ",(0,l.jsx)(n.code,{children:"application.yml"})," ",(0,l.jsx)(n.em,{children:"(or application.properties)"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"jimmer:\nshow-sql: true\npretty-sql: true\n# highlight-next-line\ninline-sql-variables: true\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Using low-level API"}),"\n",(0,l.jsxs)(s.A,{groupId:"language",children:[(0,l.jsx)(a.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setExecutor(Executor.log())\n    // highlight-next-line\n    .setSqlFormatter(SqlFormatter.INLINE_PRETTY)\n    ...other configs omitted...\n    .build();\n"})})}),(0,l.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val sqlClient = newKSqlClient {\n    setExecutor(Executor.log()) \n    // highlight-next-line\n    setSqlFormatter(SqlFormatter.INLINE_PRETTY)\n    ...other configs omitted...\n}\n"})})})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The log output is as follows:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Execute SQL===>\nPurpose: QUERY\nSQL: select \n    tb_1_.ID, \n    tb_1_.CREATED_TIME, \n    tb_1_.MODIFIED_TIME, \n    tb_1_.NAME, \n    tb_1_.EDITION, \n    tb_1_.PRICE, \n    tb_1_.STORE_ID \nfrom BOOK tb_1_ \nwhere \n    lower(tb_1_.NAME) like '%graphql%' \u2776\norder by \n    tb_1_.NAME asc, \n    tb_1_.EDITION desc \nlimit 0 \u2777, 10 \u2778\nJDBC response status: success\nTime cost: 8ms\n<===Execute SQL\n"})}),"\n",(0,l.jsx)(n.p,{children:"In this mode, we can see the parameters at \u2776 \u2777 \u2778 are directly inlined."}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"This only affects the logs. The actual SQL executed still uses JDBC parameters."})}),"\n",(0,l.jsx)(n.h2,{id:"embed-stack-trace",children:"Embed Stack Trace"}),"\n",(0,l.jsx)(n.p,{children:"In addition to coding, developers often need to troubleshoot issues. Whether it is a functional error or a performance issue, the developer needs to investigate it."}),"\n",(0,l.jsx)(n.p,{children:"If the SQL log only prints JDBC information centered on SQL, the user cannot associate the SQL log with the application code, which is not conducive to users troubleshooting."}),"\n",(0,l.jsx)(n.p,{children:"Jimmer provides a configuration option that if specified, before executing SQL, it will check the stack trace information of the current thread."}),"\n",(0,l.jsx)(n.p,{children:"However, these stack traces contain too much information, including infrastructure call frames represented by jdk, jdbc driver, jimmer and spring, while the business-related information that developers care about will be overwhelmed in the ocean of information."}),"\n",(0,l.jsxs)(n.p,{children:["This configuration type is ",(0,l.jsx)(n.code,{children:"java.util.Collection<String>"})," allowing developers to specify multiple packages or class prefixes. Jimmer will use them to filter the stack trace information. If a call frame can pass the filter, Jimmer will consider it related to user business and include it in the callback parameter before execution."]}),"\n",(0,l.jsx)(n.p,{children:"For SQL log printing, call frames that can pass the filter will appear in the print output to help users troubleshoot issues."}),"\n",(0,l.jsx)(n.p,{children:"There are two implementation methods:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When using Spring Boot Starter"}),"\n",(0,l.jsxs)(n.p,{children:["Modify ",(0,l.jsx)(n.code,{children:"application.yml"})," ",(0,l.jsx)(n.em,{children:"(or application.properties)"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"jimmer:\n    show-sql: true\n    pretty-sql: true\n    # highlight-next-line\n    executor-context-prefixes:\n    # highlight-next-line\n    - com.example.business\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When using underlying API"}),"\n",(0,l.jsxs)(s.A,{groupId:"language",children:[(0,l.jsx)(a.A,{value:"java",label:"Java",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setExecutor(Executor.log())\n    .setSqlFormatter(SqlFormatter.PRETTY)\n    // highlight-next-line\n    .setExecutorContextPrefixes(\n        Collections.singleton(\n            // highlight-next-line\n            "com.example.business"\n        )\n    )\n    ...Omit other configurations...\n    .build();\n'})})}),(0,l.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val sqlClient = newKSqlClient {\n    setExecutor(Executor.log())\n    setSqlFormatter(SqlFormatter.PRETTY)\n    // highlight-next-line\n    setExecutorContextPrefixes(\n        listOf(\n            // highlight-next-line\n            "com.example.business"\n        )\n    )\n    ...Omit other configurations...\n}\n'})})})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The log output is as follows:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Execute SQL===>\n--- Business related stack trace information --- \u2776\ncom.example.business.BookService.findBooks(BookService.java:55) \u2777 \nPurpose: QUERY\nSQL: select\n    tb_1_.ID,\n    tb_1_.CREATED_TIME,\n    tb_1_.MODIFIED_TIME,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_  \nwhere\n    lower(tb_1_.NAME) like ? /* %graphql% */\norder by \n    tb_1_.NAME asc,\n    tb_1_.EDITION desc\nlimit ? /* 0 */, ? /* 10 */\nJDBC response status: success\nTime cost: 9ms\n<===Execute SQL\n"})}),"\n",(0,l.jsx)(n.p,{children:"At \u2776 and \u2777, the stack trace information of the thread executing the SQL operation is printed."}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:"However, a large amount of stack trace information is not blindly printed, only what users care about is printed."})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var r=t(18215);const l={tabItem:"tabItem_Ymn6"};var i=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,s),hidden:t,children:n})}},11470:(e,n,t)=>{t.d(n,{A:()=>_});var r=t(96540),l=t(18215),i=t(23104),s=t(56347),a=t(205),o=t(57485),c=t(31682),d=t(70679);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:l}}=e;return{value:n,label:t,attributes:r,default:l}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const l=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(l.location.search);n.set(i,e),l.replace({...l.location,search:n.toString()})}),[i,l])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,i=u(e),[s,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[c,h]=m({queryString:t,groupId:l}),[x,j]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,i]=(0,d.Dv)(t);return[l,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:l}),g=(()=>{const e=c??x;return p({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{g&&o(g)}),[g]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),j(e)}),[h,j,i]),tabValues:i}}var j=t(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function f(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=o.indexOf(n),l=a[t].value;l!==r&&(c(n),s(l))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:h,onClick:d,...i,className:(0,l.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function E(e){const n=x(e);return(0,b.jsxs)("div",{className:(0,l.A)("tabs-container",g.tabList),children:[(0,b.jsx)(f,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function _(e){const n=(0,j.A)();return(0,b.jsx)(E,{...e,children:h(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const l={},i=r.createContext(l);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);